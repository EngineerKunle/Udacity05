function mapError(a){alert("Google map failed to load")}function initMap(){var a=document.getElementById("map"),n={lat:51.4589,lng:.1384};map=new google.maps.Map(a,{center:n,zoom:14})}function placedMarker(a,n,e){this.place=a,this.lat=n,this.lng=e;var r=new google.maps.Marker({position:{lat:this.lat,lng:this.lng},title:name,map:map,animation:google.maps.Animation.DROP});return r}function initApp(){newModel=new MapViewModel,ko.applyBindings(newModel)}var map,locations=[{name:"Asda",lat:51.45889,lng:.13946},{name:"National Trust: The Red House",lat:51.45556,lng:.12954},{name:"Broadway Shopping Centre",lat:51.45612,lng:.14616},{name:"Danson Park",lat:51.45577,lng:.12258},{name:"Bexley Train Station",lat:51.46346,lng:.13381}],MapViewModel=function(){initMap();var a=this;a.markers=[],a.locationsArray=ko.observableArray(locations),a.clearMarkers=function(){for(var n=0;n<a.markers.length;n++)a.markers[n].setMap(null);a.markers=[]},a.syncMarkers=function(n){var e=n||a.locationsArray();e.forEach(function(n){var e=new placedMarker(n.name,n.lat,n.lng);a.markers.push(e)})},a.search=ko.observable(""),a.filterPins=ko.computed(function(){if(a.search()){var n=a.search().toLowerCase(),e=ko.utils.arrayFilter(a.locationsArray(),function(a){var e=a.name.toLowerCase();return e.indexOf(n)>-1});return a.clearMarkers(),a.syncMarkers(e),e}return a.locationsArray()}),a.syncMarkers()},newModel;